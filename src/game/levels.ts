import type { BoulderDef, EnemyDef, FireBarDef } from './entities/types'

export type CoinTrail = {
  from: [number, number]
  to: [number, number]
  count?: number
}

export type LevelDefinition = {
  name: string
  rows: string[]
  boulders?: BoulderDef[]
  fireBars?: FireBarDef[]
  enemies?: EnemyDef[]
  coinTrails?: CoinTrail[]
}

const levelOneRows = [
  '................................................................',
  '................................................................',
  '...............==..C.....................==.....................',
  '..........................==.........................C..........',
  '............==........C.........==..............................',
  '....................==....C..........==.........................',
  '................................................................',
  '.............====........C............===..................C....',
  '..............................==................................',
  '....===.................................==..........C...........',
  '...................###.................###......................',
  '...................###.................###......................',
  '..........###...............................###.................',
  '..........###............C..................###.................',
  'P2.................==..............C....B........S.....G........',
  '.............S..............==...........S......................',
  '################################################################',
  '################################################################',
]

const levelOne: LevelDefinition = {
  name: 'Rooftop Run',
  rows: levelOneRows,
  boulders: [
    {
      x: 32 * 18,
      y: 32 * 16 - 28,
      size: 28,
      speed: 80,
      range: [32 * 18, 32 * 28],
    },
  ],
  fireBars: [
    {
      x: 32 * 30,
      y: 32 * 8,
      length: 88,
      speed: 2.6,
      radius: 10,
    },
  ],
  enemies: [
    {
      type: 'turtle',
      x: 32 * 6,
      y: 32 * 16 - 20,
      range: [32 * 4, 32 * 12],
      speed: 55,
    },
    {
      type: 'slime',
      x: 32 * 20,
      y: 32 * 13 - 18,
      range: [32 * 18, 32 * 23],
      speed: 40,
      hopInterval: 1.1,
    },
    {
      type: 'bird',
      x: 32 * 30,
      y: 32 * 7,
      range: [32 * 25, 32 * 34],
      speed: 70,
    },
  ],
  coinTrails: [
    { from: [10, 9], to: [14, 8], count: 5 },
    { from: [38, 7], to: [44, 6], count: 6 },
  ],
}

const levelTwoRows = [
  '................................................................',
  '.....................C.........................C................',
  '..............==.....................==.........................',
  '.................==..........C......................==..........',
  '..P2.....==.....................B..............==...............',
  '............S.........====.............C........................',
  '..................###.......................###.................',
  '..................###............C..........###.....C...........',
  '....C......................==..............................C....',
  '..........B............................B........................',
  '.................S..............==..............S...............',
  '............==...........C.............==.......................',
  '............................###.....................G...........',
  '............................###.....................S...........',
  '.......................................................C........',
  '#########...........################................############',
  '#########...........################................############',
  '################################################################',
]

const levelTwo: LevelDefinition = {
  name: 'Skyline Sprint',
  rows: levelTwoRows,
  boulders: [
    {
      x: 32 * 14,
      y: 32 * 15 - 26,
      size: 26,
      speed: 95,
      range: [32 * 14, 32 * 24],
    },
  ],
  fireBars: [
    {
      x: 32 * 22,
      y: 32 * 6,
      length: 110,
      speed: 3.2,
      radius: 11,
    },
    {
      x: 32 * 46,
      y: 32 * 9,
      length: 96,
      speed: -2.4,
      radius: 10,
    },
  ],
  enemies: [
    {
      type: 'turtle',
      x: 32 * 12,
      y: 32 * 15 - 18,
      range: [32 * 10, 32 * 18],
      speed: 60,
    },
    {
      type: 'slime',
      x: 32 * 34,
      y: 32 * 13 - 16,
      range: [32 * 33, 32 * 38],
      speed: 45,
      hopInterval: 1,
    },
    {
      type: 'bird',
      x: 32 * 48,
      y: 32 * 5,
      range: [32 * 44, 32 * 55],
      speed: 85,
    },
  ],
  coinTrails: [
    { from: [7, 9], to: [13, 8], count: 6 },
    { from: [30, 8], to: [36, 7], count: 6 },
    { from: [42, 10], to: [48, 8], count: 7 },
  ],
}

export const LEVELS: LevelDefinition[] = [levelOne, levelTwo]
